<div class="col mb-3">
    <div class="col-md-12">
        <div class="col-md-12 mb-3 mt-3">
            <h2>Nouvelle commande {{origin}}</h2>
        </div>
        <div class="alert alert-danger" *ngIf="errorMsg.length">
            <div *ngFor="let msg of errorMsg">
                <span> {{ msg }}</span>
            </div>
        </div>
        <div class="row p-3 custom-border">
            <div class="col-md-5 custom-border-right">
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" name="codeCmd" [(ngModel)]="codeCommande"
                               placeholder="Code commande" >
                    </div>
                    <div class="form-group">
                        <input type="date" class="form-control" placeholder="Date commande">
                    </div>
                    <div class="form-group">
                        <select class="form-control" name="cltFrs" [(ngModel)]="selectedClientFournisseur">
                            <option [value]="null">Selectionner un {{ origin }}</option>
                            <option *ngFor="let obj of listClientFournisseur" [ngValue]="obj">
                                {{obj.nom}}&nbsp;{{obj.prenom}}
                            </option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="col-md-5 custom-border-right" *ngIf="selectedClientFournisseur.nom">
                <div class="col">
                    <div class="row">
                        <div class="col-md-1">
                            <i class="fas fa-info-circle blue-color"></i>
                        </div>
                        <div class="col-md-10">{{selectedClientFournisseur.nom}}</div>
                    </div>
                    <div class="row">
                        <div class="col-md-1"><i class="fas fa-info-circle blue-color"></i></div>
                        <div class="col-md-10">{{selectedClientFournisseur.prenom}}</div>
                    </div>
                    <div class="row">
                        <div class="col-md-1"><i class="fas fa-phone-alt blue-color"></i></div>
                        <div class="col-md-10"> {{selectedClientFournisseur.numTel}}</div>
                    </div>
                    <div class="row">
                        <div class="col-md-1"><i class="fas fa-hourglass-half blue-color"></i></div>
                        <div class="col-md-10 text-primary">
                            <span class="badge"[ngClass]="[badgeClientFournisseur.etatCommande === badgeClientFournisseur ?
                                                           ' bg-success' : ' bg-warning']">
                                    {{badgeClientFournisseur.etatCommande === badgeClientFournisseur ?
                                      ' LIVREE' : ' EN_PREPARATION'}}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-2 text-center" *ngIf="selectedClientFournisseur.nom">
                <img [src]="selectedClientFournisseur.photo ? selectedClientFournisseur.photo : 'assets/product.png'"
                     class="rounded-circle" width="150px" height="150px" />
            </div>
        </div>
        <div class="row mt-2 p-3 custom-border">
            <div class="form-row col-md-12">
                <div class="col-md-4">
                    <input type="text" class="form-control" placeholder="Code article" (input)="filterArticle()"
                           [(ngModel)]="codeArticle">
                    <div class="badge badge-success" *ngIf="codeArticle.length && !articleNotYetSelected">
                        <p class="p-1" *ngFor="let article of listArticle"
                        (click)="selectArticleClick(article)">
                            CODE ARTICLE => {{ article.codeArticle }}&nbsp;-&nbsp;
                            DESIGNATION ARTICLE => {{ article.designation }}
                        </p>
                    </div>
                </div>
                <div class="col-md-4">
                    <input type="text" class="form-control" [(ngModel)]="quantite" placeholder="Quantite">
                </div>
                <div class="col-md-3">
                    <input type="text" class="form-control" [(ngModel)]="searchedArticle.prixUnitaireTTC"
                           placeholder="Prix unitaire" >
                </div>
                <div class="col-md-1">
                    <button type="button" class="btn btn-success" (click)="ajouterLigneCommande()">
                        <i class="fas fa-plus"></i></button>
                </div>
            </div>
        </div>
        <div class="row mt-2 p-3 custom-border" style="max-height: 300px;overflow-y: scroll">
            <div class="col-md-12">
                <app-detail-cmd *ngFor="let ligne of ligneCommande"
                                [ligneCommande]="ligne">
                </app-detail-cmd>
            </div>
        </div>
        <div class="row mt-2 p-3 custom-border ">
            <div class="col-md-12 text-right">
                <h3>Total commandes: {{totalCommande}} F CFA</h3>
            </div>
        </div>
    </div>
    <div class="col-md-12 text-right mt-2">
        <button class="btn btn-danger mr-3" (click)="cancel()">
            <i class="fas fa-ban"></i>
        </button>
        <button class="btn btn-primary" (click)="enregistrerCommande()">
            <i class="fas fa-save"></i>
        </button>
    </div>

</div>

